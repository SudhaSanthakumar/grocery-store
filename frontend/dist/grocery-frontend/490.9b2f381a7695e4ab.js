"use strict";(self.webpackChunkgrocery_frontend=self.webpackChunkgrocery_frontend||[]).push([[490],{6490:(R,l,a)=>{a.r(l),a.d(l,{OrderDetailComponent:()=>O});var d=a(177),c=a(1069),o=function(r){return r.PLACED="PLACED",r.CONFIRMED="CONFIRMED",r.PREPARING="PREPARING",r.OUT_FOR_DELIVERY="OUT_FOR_DELIVERY",r.DELIVERED="DELIVERED",r.CANCELLED="CANCELLED",r}(o||{}),t=a(4438),u=a(8674);function m(r,s){if(1&r&&(t.j41(0,"div",40)(1,"div",41),t.nrm(2,"img",42),t.k0s(),t.j41(3,"div",43)(4,"h6",31),t.EFF(5),t.k0s(),t.j41(6,"p",44),t.EFF(7),t.k0s()(),t.j41(8,"div",41)(9,"span",23),t.EFF(10),t.k0s()(),t.j41(11,"div",41)(12,"span",23),t.EFF(13),t.k0s()(),t.j41(14,"div",45)(15,"strong",35),t.EFF(16),t.k0s()()()),2&r){const e=s.$implicit;t.R7$(2),t.Y8G("src",e.groceryItem.imageUrl,t.B4B)("alt",e.groceryItem.name),t.R7$(3),t.JRh(e.groceryItem.name),t.R7$(2),t.JRh(e.groceryItem.description),t.R7$(3),t.SpI("Qty: ",e.quantity,""),t.R7$(3),t.SpI("$",e.price.toFixed(2)," each"),t.R7$(3),t.SpI("$",e.totalPrice.toFixed(2),"")}}function p(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateStatus("CONFIRMED"))}),t.EFF(1," Confirm Order "),t.k0s()}}function _(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateStatus("PREPARING"))}),t.EFF(1," Start Preparing "),t.k0s()}}function E(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateStatus("OUT_FOR_DELIVERY"))}),t.EFF(1," Out for Delivery "),t.k0s()}}function f(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateStatus("DELIVERED"))}),t.EFF(1," Mark as Delivered "),t.k0s()}}function g(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",56),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateStatus("CANCELLED"))}),t.EFF(1," Cancel Order "),t.k0s()}}function v(r,s){if(1&r&&(t.j41(0,"div",17)(1,"div",10)(2,"h5",11),t.EFF(3,"Update Status"),t.k0s()(),t.j41(4,"div",12)(5,"div",46),t.DNE(6,p,2,0,"button",47)(7,_,2,0,"button",48)(8,E,2,0,"button",49)(9,f,2,0,"button",50)(10,g,2,0,"button",51),t.k0s()()()),2&r){const e=t.XpG(2);t.R7$(6),t.Y8G("ngIf",e.order.status===e.OrderStatus.PLACED),t.R7$(),t.Y8G("ngIf",e.order.status===e.OrderStatus.CONFIRMED),t.R7$(),t.Y8G("ngIf",e.order.status===e.OrderStatus.PREPARING),t.R7$(),t.Y8G("ngIf",e.order.status===e.OrderStatus.OUT_FOR_DELIVERY),t.R7$(),t.Y8G("ngIf",e.canCancelOrder())}}function F(r,s){if(1&r&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div")(4,"h2"),t.nrm(5,"i",6),t.EFF(6),t.k0s(),t.j41(7,"p",7),t.EFF(8),t.k0s()(),t.j41(9,"span",8),t.EFF(10),t.k0s()(),t.j41(11,"div",9)(12,"div",10)(13,"h5",11),t.EFF(14,"Order Items"),t.k0s()(),t.j41(15,"div",12),t.DNE(16,m,17,7,"div",13),t.nrm(17,"hr"),t.j41(18,"div",3)(19,"div",14)(20,"strong"),t.EFF(21,"Total Amount:"),t.k0s()(),t.j41(22,"div",15)(23,"strong",16),t.EFF(24),t.k0s()()()()(),t.j41(25,"div",17)(26,"div",10)(27,"h5",11),t.EFF(28,"Order Tracking"),t.k0s()(),t.j41(29,"div",12)(30,"div",18)(31,"div",19)(32,"div",20),t.nrm(33,"i",21),t.k0s(),t.j41(34,"div",22)(35,"h6"),t.EFF(36,"Order Placed"),t.k0s(),t.j41(37,"small",23),t.EFF(38,"Your order has been placed successfully"),t.k0s()()(),t.j41(39,"div",19)(40,"div",20),t.nrm(41,"i",24),t.k0s(),t.j41(42,"div",22)(43,"h6"),t.EFF(44,"Order Confirmed"),t.k0s(),t.j41(45,"small",23),t.EFF(46,"We have confirmed your order"),t.k0s()()(),t.j41(47,"div",19)(48,"div",20),t.nrm(49,"i",25),t.k0s(),t.j41(50,"div",22)(51,"h6"),t.EFF(52,"Preparing"),t.k0s(),t.j41(53,"small",23),t.EFF(54,"Your order is being prepared"),t.k0s()()(),t.j41(55,"div",19)(56,"div",20),t.nrm(57,"i",26),t.k0s(),t.j41(58,"div",22)(59,"h6"),t.EFF(60,"Out for Delivery"),t.k0s(),t.j41(61,"small",23),t.EFF(62,"Your order is on the way"),t.k0s()()(),t.j41(63,"div",19)(64,"div",20),t.nrm(65,"i",27),t.k0s(),t.j41(66,"div",22)(67,"h6"),t.EFF(68,"Delivered"),t.k0s(),t.j41(69,"small",23),t.EFF(70,"Order has been delivered"),t.k0s()()()()()()(),t.j41(71,"div",28)(72,"div",29)(73,"div",10)(74,"h5",11),t.EFF(75,"Delivery Information"),t.k0s()(),t.j41(76,"div",12)(77,"h6"),t.nrm(78,"i",30),t.EFF(79,"Customer Details"),t.k0s(),t.j41(80,"p",31)(81,"strong"),t.EFF(82),t.k0s()(),t.j41(83,"p",32),t.EFF(84),t.k0s(),t.j41(85,"p",33),t.EFF(86),t.k0s(),t.j41(87,"h6"),t.nrm(88,"i",34),t.EFF(89,"Delivery Time"),t.k0s(),t.j41(90,"p",11)(91,"strong"),t.EFF(92,"Estimated Delivery:"),t.k0s(),t.nrm(93,"br"),t.j41(94,"span",35),t.EFF(95),t.k0s()()()(),t.DNE(96,v,11,5,"div",36),t.j41(97,"div",37)(98,"a",38),t.nrm(99,"i",39),t.EFF(100,"Back to Orders "),t.k0s()()()()),2&r){const e=t.XpG();t.R7$(6),t.SpI("Order #",e.order.id,""),t.R7$(2),t.SpI("Placed on ",e.getFormattedDate(e.order.orderDate),""),t.R7$(),t.Y8G("ngClass","status-"+e.order.status.toLowerCase()),t.R7$(),t.SpI(" ",e.getStatusText(e.order.status)," "),t.R7$(6),t.Y8G("ngForOf",e.order.orderItems),t.R7$(8),t.SpI("$",e.order.totalAmount.toFixed(2),""),t.R7$(7),t.AVh("active",e.isStatusActive(e.OrderStatus.PLACED))("completed",e.isStatusCompleted(e.OrderStatus.PLACED)),t.R7$(8),t.AVh("active",e.isStatusActive(e.OrderStatus.CONFIRMED))("completed",e.isStatusCompleted(e.OrderStatus.CONFIRMED)),t.R7$(8),t.AVh("active",e.isStatusActive(e.OrderStatus.PREPARING))("completed",e.isStatusCompleted(e.OrderStatus.PREPARING)),t.R7$(8),t.AVh("active",e.isStatusActive(e.OrderStatus.OUT_FOR_DELIVERY))("completed",e.isStatusCompleted(e.OrderStatus.OUT_FOR_DELIVERY)),t.R7$(8),t.AVh("active",e.isStatusActive(e.OrderStatus.DELIVERED))("completed",e.isStatusCompleted(e.OrderStatus.DELIVERED)),t.R7$(19),t.JRh(e.order.customerName),t.R7$(2),t.JRh(e.order.customerPhone),t.R7$(2),t.JRh(e.order.customerAddress),t.R7$(9),t.JRh(e.getFormattedDate(e.order.estimatedDelivery)),t.R7$(),t.Y8G("ngIf",e.order.status!==e.OrderStatus.DELIVERED&&e.order.status!==e.OrderStatus.CANCELLED)}}function b(r,s){1&r&&(t.j41(0,"div",57)(1,"div",58)(2,"span",59),t.EFF(3,"Loading..."),t.k0s()()())}function k(r,s){1&r&&(t.j41(0,"div",60),t.nrm(1,"i",61),t.j41(2,"h4"),t.EFF(3,"Order not found"),t.k0s(),t.j41(4,"p"),t.EFF(5,"The requested order could not be found."),t.k0s(),t.j41(6,"a",62),t.nrm(7,"i",39),t.EFF(8,"Back to Orders "),t.k0s()())}let O=(()=>{class r{constructor(e,n){this.route=e,this.orderService=n,this.order=null,this.loading=!0,this.orderId=0,this.OrderStatus=o,this.statusOrder=[o.PLACED,o.CONFIRMED,o.PREPARING,o.OUT_FOR_DELIVERY,o.DELIVERED]}ngOnInit(){this.route.params.subscribe(e=>{this.orderId=+e.id,this.loadOrder()})}loadOrder(){this.loading=!0,this.orderService.getOrderById(this.orderId).subscribe({next:e=>{this.order=e,this.loading=!1},error:e=>{console.error("Error loading order:",e),this.loading=!1}})}getFormattedDate(e){return new Date(e).toLocaleString()}getStatusText(e){switch(e){case"PLACED":return"Placed";case"CONFIRMED":return"Confirmed";case"PREPARING":return"Preparing";case"OUT_FOR_DELIVERY":return"Out for Delivery";case"DELIVERED":return"Delivered";case"CANCELLED":return"Cancelled";default:return e}}isStatusActive(e){return this.order?.status===e}isStatusCompleted(e){return!(!this.order||this.order.status===o.CANCELLED)&&this.statusOrder.indexOf(this.order.status)>this.statusOrder.indexOf(e)}canCancelOrder(){return!!this.order&&this.order.status!==o.DELIVERED&&this.order.status!==o.CANCELLED}updateStatus(e){this.order&&this.orderService.updateOrderStatus(this.order.id,e).subscribe({next:n=>{this.order=n},error:n=>{console.error("Error updating order status:",n),alert("Failed to update order status. Please try again.")}})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(c.nX),t.rXU(u.Q))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-order-detail"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[["class","row",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fas","fa-receipt","me-2"],[1,"text-muted","mb-0"],[1,"order-status",3,"ngClass"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],["class","row align-items-center mb-3",4,"ngFor","ngForOf"],[1,"col-md-9"],[1,"col-md-3"],[1,"text-success","h5"],[1,"card"],[1,"order-tracking"],[1,"tracking-step"],[1,"tracking-icon"],[1,"fas","fa-shopping-cart"],[1,"tracking-content"],[1,"text-muted"],[1,"fas","fa-check-circle"],[1,"fas","fa-utensils"],[1,"fas","fa-truck"],[1,"fas","fa-home"],[1,"col-md-4"],[1,"card","mb-3"],[1,"fas","fa-user","me-2"],[1,"mb-1"],[1,"mb-1","text-muted"],[1,"mb-3","text-muted"],[1,"fas","fa-clock","me-2"],[1,"text-success"],["class","card",4,"ngIf"],[1,"mt-3"],["routerLink","/orders",1,"btn","btn-outline-secondary"],[1,"fas","fa-arrow-left","me-2"],[1,"row","align-items-center","mb-3"],[1,"col-md-2"],[1,"cart-item-image",3,"src","alt"],[1,"col-md-5"],[1,"text-muted","mb-0","small"],[1,"col-md-1"],[1,"d-grid","gap-2"],["class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-outline-warning btn-sm",3,"click",4,"ngIf"],["class","btn btn-outline-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"empty-state"],[1,"fas","fa-exclamation-triangle"],["routerLink","/orders",1,"btn","btn-primary"]],template:function(n,i){1&n&&t.DNE(0,F,101,31,"div",0)(1,b,4,0,"div",1)(2,k,9,0,"div",2),2&n&&(t.Y8G("ngIf",!i.loading&&i.order),t.R7$(),t.Y8G("ngIf",i.loading),t.R7$(),t.Y8G("ngIf",!i.loading&&!i.order))},dependencies:[d.MD,d.YU,d.Sq,d.bT,c.iI,c.Wk],styles:['.order-tracking[_ngcontent-%COMP%]{position:relative}.tracking-step[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px;position:relative}.tracking-step[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;left:20px;top:40px;width:2px;height:30px;background-color:#dee2e6}.tracking-step.completed[_ngcontent-%COMP%]:after{background-color:#28a745}.tracking-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#f8f9fa;border:2px solid #dee2e6;display:flex;align-items:center;justify-content:center;margin-right:15px;z-index:1;position:relative}.tracking-step.active[_ngcontent-%COMP%]   .tracking-icon[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.tracking-step.completed[_ngcontent-%COMP%]   .tracking-icon[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745;color:#fff}.tracking-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px}.tracking-step.active[_ngcontent-%COMP%]   .tracking-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.tracking-step.completed[_ngcontent-%COMP%]   .tracking-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#28a745}']})}}return r})()}}]);