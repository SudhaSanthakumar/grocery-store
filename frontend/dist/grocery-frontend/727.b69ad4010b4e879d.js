"use strict";(self.webpackChunkgrocery_frontend=self.webpackChunkgrocery_frontend||[]).push([[727],{2727:(C,m,o)=>{o.r(m),o.d(m,{CartComponent:()=>b});var c=o(177),l=o(1069),t=o(4438),d=o(6868);function u(r,a){1&r&&(t.j41(0,"div",7),t.nrm(1,"i",8),t.j41(2,"h4"),t.EFF(3,"Your cart is empty"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Add some delicious items to get started!"),t.k0s(),t.j41(6,"a",9),t.nrm(7,"i",10),t.EFF(8,"Continue Shopping "),t.k0s()())}function _(r,a){if(1&r){const e=t.RV6();t.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),t.nrm(4,"img",20),t.k0s(),t.j41(5,"div",21)(6,"h5",22),t.EFF(7),t.k0s(),t.j41(8,"p",23),t.EFF(9),t.k0s(),t.j41(10,"small",24),t.EFF(11),t.k0s()(),t.j41(12,"div",25)(13,"div",26)(14,"button",27),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.updateQuantity(i,i.quantity-1))}),t.nrm(15,"i",28),t.k0s(),t.j41(16,"span",29),t.EFF(17),t.k0s(),t.j41(18,"button",27),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.updateQuantity(i,i.quantity+1))}),t.nrm(19,"i",30),t.k0s()()(),t.j41(20,"div",19)(21,"h5",31),t.EFF(22),t.k0s()(),t.j41(23,"div",32)(24,"button",33),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.removeItem(i))}),t.nrm(25,"i",34),t.k0s()()()()()}if(2&r){const e=a.$implicit;t.R7$(4),t.Y8G("src",e.groceryItem.imageUrl,t.B4B)("alt",e.groceryItem.name),t.R7$(3),t.JRh(e.groceryItem.name),t.R7$(2),t.JRh(e.groceryItem.description),t.R7$(2),t.SpI("$",e.groceryItem.price.toFixed(2)," each"),t.R7$(3),t.Y8G("disabled",e.quantity<=1),t.R7$(3),t.JRh(e.quantity),t.R7$(),t.Y8G("disabled",e.quantity>=e.groceryItem.availableQuantity),t.R7$(4),t.SpI("$",e.totalPrice.toFixed(2),"")}}function p(r,a){if(1&r){const e=t.RV6();t.j41(0,"div"),t.DNE(1,_,26,9,"div",11),t.j41(2,"div",12)(3,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.clearCart())}),t.nrm(4,"i",14),t.EFF(5,"Clear Cart "),t.k0s(),t.j41(6,"a",15),t.nrm(7,"i",10),t.EFF(8,"Continue Shopping "),t.k0s()()()}if(2&r){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.cartItems)}}function f(r,a){if(1&r&&(t.j41(0,"div",42)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&r){const e=a.$implicit;t.R7$(2),t.Lme("",e.groceryItem.name," (",e.quantity,"x)"),t.R7$(2),t.SpI("$",e.totalPrice.toFixed(2),"")}}function v(r,a){if(1&r&&(t.j41(0,"div",21)(1,"div",35)(2,"div",36)(3,"h5",37),t.EFF(4,"Order Summary"),t.k0s()(),t.j41(5,"div",17),t.DNE(6,f,5,3,"div",38),t.nrm(7,"hr"),t.j41(8,"div",39)(9,"strong"),t.EFF(10,"Total: "),t.k0s(),t.j41(11,"strong",24),t.EFF(12),t.k0s()(),t.j41(13,"a",40),t.nrm(14,"i",41),t.EFF(15,"Proceed to Checkout "),t.k0s()()()()),2&r){const e=t.XpG();t.R7$(6),t.Y8G("ngForOf",e.cartItems),t.R7$(6),t.SpI("$",e.cartTotal.toFixed(2),"")}}function g(r,a){1&r&&(t.j41(0,"div",43)(1,"div",44)(2,"span",45),t.EFF(3,"Loading..."),t.k0s()()())}let b=(()=>{class r{constructor(e){this.cartService=e,this.cartItems=[],this.cartTotal=0,this.loading=!0}ngOnInit(){this.loadCartItems()}loadCartItems(){this.loading=!0,this.cartService.getCartItems().subscribe({next:e=>{this.cartItems=e,this.calculateTotal(),this.loading=!1},error:e=>{console.error("Error loading cart items:",e),this.loading=!1}})}calculateTotal(){this.cartTotal=this.cartItems.reduce((e,n)=>e+n.totalPrice,0)}updateQuantity(e,n){n>=1&&n<=e.groceryItem.availableQuantity&&this.cartService.updateCartItem(e.id,n).subscribe({next:()=>{this.loadCartItems()},error:i=>{console.error("Error updating cart item:",i)}})}removeItem(e){this.cartService.removeFromCart(e.id).subscribe({next:()=>{this.loadCartItems()},error:n=>{console.error("Error removing cart item:",n)}})}clearCart(){confirm("Are you sure you want to clear your cart?")&&this.cartService.clearCart().subscribe({next:()=>{this.loadCartItems()},error:e=>{console.error("Error clearing cart:",e)}})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(d.m))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-cart"]],standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[[1,"row"],[1,"col-md-8"],[1,"fas","fa-shopping-cart","me-2"],["class","empty-state",4,"ngIf"],[4,"ngIf"],["class","col-md-4",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-shopping-cart"],["routerLink","/products",1,"btn","btn-primary"],[1,"fas","fa-store","me-2"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-trash","me-2"],["routerLink","/products",1,"btn","btn-outline-primary"],[1,"card","mb-3"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-md-2"],[1,"cart-item-image",3,"src","alt"],[1,"col-md-4"],[1,"mb-1"],[1,"text-muted","mb-0"],[1,"text-success"],[1,"col-md-3"],[1,"quantity-controls"],[1,"btn","btn-sm",3,"click","disabled"],[1,"fas","fa-minus"],[1,"mx-3"],[1,"fas","fa-plus"],[1,"text-success","mb-0"],[1,"col-md-1"],["title","Remove item",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"card"],[1,"card-header"],[1,"mb-0"],["class","d-flex justify-content-between mb-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-3"],["routerLink","/checkout",1,"btn","btn-primary","w-100"],[1,"fas","fa-credit-card","me-2"],[1,"d-flex","justify-content-between","mb-2"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.nrm(3,"i",2),t.EFF(4,"Shopping Cart"),t.k0s(),t.DNE(5,u,9,0,"div",3)(6,p,9,1,"div",4),t.k0s(),t.DNE(7,v,16,2,"div",5),t.k0s(),t.DNE(8,g,4,0,"div",6)),2&n&&(t.R7$(5),t.Y8G("ngIf",!i.loading&&0===i.cartItems.length),t.R7$(),t.Y8G("ngIf",i.cartItems.length>0),t.R7$(),t.Y8G("ngIf",i.cartItems.length>0),t.R7$(),t.Y8G("ngIf",i.loading))},dependencies:[c.MD,c.Sq,c.bT,l.iI,l.Wk],encapsulation:2})}}return r})()}}]);