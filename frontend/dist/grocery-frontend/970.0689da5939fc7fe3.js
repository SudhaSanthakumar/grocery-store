"use strict";(self.webpackChunkgrocery_frontend=self.webpackChunkgrocery_frontend||[]).push([[970],{8970:(k,m,o)=>{o.r(m),o.d(m,{ProductListComponent:()=>j});var l=o(177),c=o(4341),t=o(4438),p=o(5312),h=o(1626);let g=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${p.c.apiUrl}/grocery`}getAllItems(){return this.http.get(`${this.apiUrl}/items`)}getItemById(e){return this.http.get(`${this.apiUrl}/items/${e}`)}getItemsByCategory(e){return this.http.get(`${this.apiUrl}/items/category/${e}`)}searchItems(e){return this.http.get(`${this.apiUrl}/items/search?name=${e}`)}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(h.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var f=o(6868);function y(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.filterByCategory(r))}),t.EFF(1),t.k0s()}if(2&n){const e=a.$implicit,i=t.XpG();t.AVh("btn-primary",i.selectedCategory===e)("btn-outline-primary",i.selectedCategory!==e),t.R7$(),t.SpI(" ",e," ")}}function b(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",19)(1,"div",20),t.nrm(2,"img",21),t.j41(3,"div",22)(4,"h5",23),t.EFF(5),t.k0s(),t.j41(6,"p",24),t.EFF(7),t.k0s(),t.j41(8,"div",25)(9,"div",26)(10,"span",27),t.EFF(11),t.k0s(),t.j41(12,"small",4),t.EFF(13),t.k0s()(),t.j41(14,"div",28)(15,"div",29)(16,"button",30),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.decreaseQuantity(r.id))}),t.nrm(17,"i",31),t.k0s(),t.j41(18,"span",32),t.EFF(19),t.k0s(),t.j41(20,"button",30),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.increaseQuantity(r.id))}),t.nrm(21,"i",33),t.k0s()(),t.j41(22,"button",34),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.addToCart(r))}),t.nrm(23,"i",35),t.EFF(24," Add to Cart "),t.k0s()()()()()()}if(2&n){const e=a.$implicit,i=t.XpG(2);t.R7$(2),t.Y8G("src",e.imageUrl,t.B4B)("alt",e.name),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.description),t.R7$(4),t.SpI("$",e.price.toFixed(2),""),t.R7$(2),t.SpI("",e.availableQuantity," available"),t.R7$(3),t.Y8G("disabled",i.getQuantity(e.id)<=1),t.R7$(3),t.JRh(i.getQuantity(e.id)),t.R7$(),t.Y8G("disabled",i.getQuantity(e.id)>=e.availableQuantity),t.R7$(2),t.Y8G("disabled",0===e.availableQuantity)}}function _(n,a){if(1&n&&(t.j41(0,"div",17),t.DNE(1,b,25,10,"div",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.filteredItems)}}function v(n,a){1&n&&(t.j41(0,"div",36)(1,"div",37)(2,"span",38),t.EFF(3,"Loading..."),t.k0s()()())}function C(n,a){1&n&&(t.j41(0,"div",39),t.nrm(1,"i",9),t.j41(2,"h4"),t.EFF(3,"No products found"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Try adjusting your search or category filter"),t.k0s()())}let j=(()=>{class n{constructor(e,i){this.groceryService=e,this.cartService=i,this.items=[],this.filteredItems=[],this.categories=[],this.selectedCategory="all",this.searchTerm="",this.loading=!0,this.quantities={}}ngOnInit(){this.loadProducts()}loadProducts(){this.loading=!0,this.groceryService.getAllItems().subscribe({next:e=>{this.items=e,this.filteredItems=e,this.categories=[...new Set(e.map(i=>i.category))],this.initializeQuantities(),this.loading=!1},error:e=>{console.error("Error loading products:",e),this.loading=!1}})}initializeQuantities(){this.items.forEach(e=>{this.quantities[e.id]=1})}filterByCategory(e){this.selectedCategory=e,this.filteredItems="all"===e?this.items:this.items.filter(i=>i.category===e)}searchProducts(){this.searchTerm.trim()?this.groceryService.searchItems(this.searchTerm).subscribe({next:e=>{this.filteredItems=e},error:e=>{console.error("Error searching products:",e)}}):this.filterByCategory(this.selectedCategory)}getQuantity(e){return this.quantities[e]||1}increaseQuantity(e){const i=this.items.find(r=>r.id===e);i&&this.quantities[e]<i.availableQuantity&&this.quantities[e]++}decreaseQuantity(e){this.quantities[e]>1&&this.quantities[e]--}addToCart(e){const i=this.getQuantity(e.id);this.cartService.addToCart(e.id,i).subscribe({next:()=>{this.quantities[e.id]=1},error:r=>{console.error("Error adding to cart:",r)}})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(g),t.rXU(f.m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-product-list"]],standalone:!0,features:[t.aNF],decls:22,vars:9,consts:[["loadingTemplate",""],[1,"row","mb-4"],[1,"col-md-8"],[1,"fas","fa-store","me-2"],[1,"text-muted"],[1,"col-md-4"],[1,"input-group"],["type","text","placeholder","Search products...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-search"],[1,"row","mb-3"],[1,"col-12"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button","class","btn",3,"btn-primary","btn-outline-primary","click",4,"ngFor","ngForOf"],["class","row",4,"ngIf","ngIfElse"],["class","empty-state",4,"ngIf"],[1,"row"],["class","col-md-4 col-lg-3 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","col-lg-3","mb-4"],[1,"card","h-100"],[1,"card-img-top","product-image",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"card-text","text-muted","small"],[1,"mt-auto"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"h5","text-success","mb-0"],[1,"d-flex","align-items-center"],[1,"quantity-controls","me-3"],[1,"btn","btn-sm",3,"click","disabled"],[1,"fas","fa-minus"],[1,"mx-2"],[1,"fas","fa-plus"],[1,"btn","btn-primary","btn-sm","flex-grow-1",3,"click","disabled"],[1,"fas","fa-cart-plus","me-1"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"empty-state"]],template:function(i,r){if(1&i){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h2"),t.nrm(3,"i",3),t.EFF(4,"Fresh Groceries"),t.k0s(),t.j41(5,"p",4),t.EFF(6,"Choose from our selection of fresh, quality groceries"),t.k0s()(),t.j41(7,"div",5)(8,"div",6)(9,"input",7),t.mxI("ngModelChange",function(u){return t.eBV(s),t.DH7(r.searchTerm,u)||(r.searchTerm=u),t.Njj(u)}),t.bIt("keyup.enter",function(){return t.eBV(s),t.Njj(r.searchProducts())}),t.k0s(),t.j41(10,"button",8),t.bIt("click",function(){return t.eBV(s),t.Njj(r.searchProducts())}),t.nrm(11,"i",9),t.k0s()()()(),t.j41(12,"div",10)(13,"div",11)(14,"div",12)(15,"button",13),t.bIt("click",function(){return t.eBV(s),t.Njj(r.filterByCategory("all"))}),t.EFF(16," All Categories "),t.k0s(),t.DNE(17,y,2,5,"button",14),t.k0s()()(),t.DNE(18,_,2,1,"div",15)(19,v,4,0,"ng-template",null,0,t.C5r)(21,C,6,0,"div",16)}if(2&i){const s=t.sdS(20);t.R7$(9),t.R50("ngModel",r.searchTerm),t.R7$(6),t.AVh("btn-primary","all"===r.selectedCategory)("btn-outline-primary","all"!==r.selectedCategory),t.R7$(2),t.Y8G("ngForOf",r.categories),t.R7$(),t.Y8G("ngIf",!r.loading)("ngIfElse",s),t.R7$(3),t.Y8G("ngIf",!r.loading&&0===r.filteredItems.length)}},dependencies:[l.MD,l.Sq,l.bT,c.YN,c.me,c.BC,c.vS],encapsulation:2})}}return n})()}}]);